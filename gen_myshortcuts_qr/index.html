<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">

<title>Generate Myshortcuts+Viewer QRCode</title>

<link rel="stylesheet" href="css/uikit.min.css">
</head>
<body>
<div class="uk-container uk-container-center">
  <div class="uk-grid uk-article" data-uk-grid-margin>
    <div class="uk-grid">
      <div class="uk-width-medium-7-10">
        <h1 class="uk-article-title">Generate Myshortcuts+Viewer QRCode</h1>
      </div>
      <div class="uk-width-medium-3-10">
        <div class="uk-grid">
          <div class="uk-grid-medium-1-1">
            <iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Friffrain.github.io%2Fgen_myshortcuts_qr%2F&amp;layout=button_count&amp;action=like&amp;show_faces=false&amp;share=false&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:150px; height:21px;" allowTransparency="true"></iframe>
          </div>
          <div class="uk-grid-medium-1-1">
            <a href="https://twitter.com/share" class="twitter-share-button">Tweet</a>
          </div>
          <div class="uk-grid-medium-1-1">
            <div class="g-plus" data-action="share" data-annotation="bubble"></div>
          </div>
        </div>
      </div>
    </div>
    <p class="uk-article-lead">
      Myshortcuts+Viewerのメモに内容を追加できるQRコードを生成します。iPhoneで生成されたQRコードを読み取れば、Myshortcuts+Viewerに登録することができます。iPhoneで入力するのが面倒くさい人向け。
    </p>
  </div>
  <div class="uk-grid uk-grid-divider" data-uk-grid-match data-uk-grid-margin>
    <div id="code-area" class="uk-width-medium-7-10 uk-width-small-1-1">
      <div class="uk-grid">
        <div class="uk-width-medium-1-1">
          <p class="uk-text-bold uk-text-top">1. メモを入力</p>
          <form class="uk-form">
            <textarea id="code" name="code" class="uk-width-1-1" rows="15" placeholder="ここにメモを入力してください。"></textarea>
          </form>
        </div>
        <div id="action-area" class="uk-width-medium-1-1 ">
          <button id="generate" class="uk-button uk-button-primary uk-width-1-1 uk-button-large">QRコード作成</button>
        </div>
      </div>
    </div>
    <div class="uk-width-medium-3-10 uk-width-small-1-1">
        <p class="uk-text-bold uk-text-top">2. ここにQRコードが生成されます。</p>
        <div id="qrcode" class="uk-thumbnail uk-thumbnail-expand"></div>
        <div>
          <form class="uk-form">
            <input type="text" name="maked-url" id="maked-url" style="margin-top: 10px; width: 100%;" placeholder="生成されたURLスキーム" >
          </form>
        </div>
    </div>
  </div>
</div>

<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
<script src="https://apis.google.com/js/platform.js" async defer>
  {lang: 'ja'}
</script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="js/uikit.min.js"></script>
<script src="js/qrcode.min.js"></script>
<script>
$(function () {

  var qrcode = new QRCode("qrcode");

  var generateQR = function () {
    var code = $('#code').val() || '';
    var base_url = 'myshortcuts://memo?add=';
    var url;

    if (code == '') {
      $('#code').addClass('uk-animation-shake');
      setTimeout(function () {
        $('#code').focus();
        return false;
      }, 500)
    } else {
      url = base_url + encodeURI(code);
      qrcode.makeCode(url);

      $('#maked-url').val(url);
    }
  };

  $('#code').on('focus', function () {
    $(this).removeClass('uk-animation-shake');
  });

  $('#generate').on('click', function () {
    generateQR();
  });

});
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-45803507-4', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>